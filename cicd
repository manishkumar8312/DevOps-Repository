## ‚öôÔ∏è CI/CD Basic Commands

CI/CD (Continuous Integration and Continuous Deployment) automates the process of building, testing, and deploying applications.  
It ensures smoother, faster, and more reliable delivery of code changes.

---

### üß± CI/CD Setup & Overview
| Command / Tool | Description |
|----------------|-------------|
| `git init` | Initialize a new Git repository |
| `git add .` | Stage all changes |
| `git commit -m "message"` | Commit changes with a message |
| `git remote add origin <repo_url>` | Connect local repo to GitHub |
| `git push origin main` | Push code to the main branch |
| `gh workflow list` | List all GitHub Actions workflows |
| `gh workflow run <workflow_name>` | Manually trigger a workflow |
| `gh run watch` | Watch running GitHub Actions workflow logs |

---

### Continuous Integration (CI)
| Step | Command / Concept | Description |
|------|-------------------|-------------|
| **Build Stage** | `docker build -t <image_name> .` | Build application image before testing |
| **Test Stage** | `npm test` / `pytest` / `mvn test` | Run automated tests before merging |
| **Linting** | `eslint .` / `flake8` | Check code for syntax or style issues |
| **Pipeline Trigger** | `on: [push, pull_request]` | Trigger pipeline automatically on push or PR |
| **Checkout Code** | `uses: actions/checkout@v4` | Pull the latest code into the workflow |
| **Setup Environment** | `uses: actions/setup-node@v4` / `setup-python` | Defines language/runtime for build |

---

### üèóÔ∏è Continuous Deployment (CD)
| Step | Command / Tool | Description |
|------|----------------|-------------|
| **Build Docker Image** | `docker build -t <image_name> .` | Package your app into a Docker image |
| **Push Image** | `docker push <repo>/<image>:tag` | Push image to DockerHub or ECR |
| **Deploy to Kubernetes** | `kubectl apply -f k8s/` | Apply deployment configuration to cluster |
| **Check Deployment** | `kubectl get pods` / `kubectl get svc` | Verify running pods and services |
| **Monitor Rollout** | `kubectl rollout status deployment/<name>` | Check deployment rollout progress |
| **Rollback (if needed)** | `kubectl rollout undo deployment/<name>` | Roll back to a previous stable version |

---

### üßæ Example: GitHub Actions CI/CD Workflow
A basic **GitHub Actions pipeline** (`.github/workflows/ci-cd.yml`):

```yaml
name: CI/CD Pipeline

on:
  push:
    branches: [ "main" ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - name: Install Dependencies
        run: npm install

      - name: Run Tests
        run: npm test

      - name: Build Docker Image
        run: docker build -t ${{ secrets.DOCKER_USERNAME }}/devops-app:latest .

      - name: Login to DockerHub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      - name: Push Docker Image
        run: docker push ${{ secrets.DOCKER_USERNAME }}/devops-app:latest

      - name: Deploy to Kubernetes
        env:
          KUBE_CONFIG_DATA: ${{ secrets.KUBE_CONFIG_DATA }}
        run: |
          echo "$KUBE_CONFIG_DATA" | base64 --decode > $HOME/.kube/config
          kubectl apply -f k8s/
          kubectl rollout status deployment/devops-app
